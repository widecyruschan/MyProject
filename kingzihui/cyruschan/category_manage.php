<?phprequire_once(dirname(__FILE__).'/header.php');if(is_numeric($_GET['del'])){	if($db->query("SELECT `id` FROM `{$DB['prefix']}category` WHERE `nexus` LIKE '%,{$_GET['del']},%' && `id` != '{$_GET['del']}' LIMIT 1",1)){		admin::logs(4,$language['page']['delete_section'].'，'.$language['common']['failed'].'(id:'.$_GET['del'].')，'.$language['page']['sub_exist']);		msgbox($language['page']['sub_exist'],'CURRENT'); 	}	switch ($_GET['module']){		case 'MO001x' : $table = 'article'; break;		case 'MO002x' : $table = 'product'; break;		case 'MO003x' : $table = 'picture'; break;		case 'MO004x' : $table = 'download'; break;		default: die('Undefined Parameters.'); break;	}	$table = $DB['prefix'].$table;	if($db->query("SELECT `id` FROM `{$table}` WHERE `category` LIKE '%,{$_GET['del']},%';",1)){		admin::logs(4,$language['page']['delete_section'].'，'.$language['common']['failed'].'(id:'.$_GET['del'].')，'.$language['page']['content_exist']);		msgbox($language['page']['content_exist'],'CURRENT'); 	}	if($db->execute("DELETE FROM `{$DB['prefix']}category` WHERE `id` = '{$_GET['del']}'")){		admin::logs(4,$language['page']['delete_section'].'，'.$language['common']['successful'].'(id:'.$_GET['del'].')'); 		msgbox('','CURRENT'); 		} else {		admin::logs(4,$language['page']['delete_section'].'，'.$language['common']['failed'].'(id:'.$_GET['del'].')');		msgbox($language['common']['failed'],'CURRENT'); 	}}$mycms['channel'] = $db->query("SELECT * FROM `{$DB['prefix']}category`  WHERE `lang` = '".LANG."' && `bid` = 0 ORDER BY `sort` ASC,`id` ASC");$mycms['category_all'] = category::order($db->query("SELECT * FROM `{$DB['prefix']}category` ORDER BY `sort` ASC,`id` ASC")); foreach($mycms['channel'] as &$n){	$mycms['category'][$n['id']] = array();	foreach($mycms['category_all'] as &$m){		$m['div_indentation'] = 40*$m['level'];				$m['bid'] == $n['id'] && $mycms['category'][$n['id']][] = $m;	}	$n['div_height'] = 40*count($mycms['category'][$n['id']]);}require_once(ADMIN_PATH.'/footer.php'); 