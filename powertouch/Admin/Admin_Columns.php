<?phpinclude( "inc/header.php" );login_check();$sql = "select * from `{$DB_dbprefix}columns` order by columnswith desc,id asc";$query = $db -> query($sql);while($row=mysql_fetch_assoc($query)){	                        $class_arr[] = array($row['id'],$row['columnsname'],$row['bid'],$row['sort'],$row['hide'],$row['module'],);		}function hide($_hide){	if ($_hide==1)		{			echo "&nbsp;&nbsp;<font color=\"red\" class=\"nob\">隐</font>";		}	}function lmfl($m,$id,$index){		global $class_arr;	$n = str_pad('',$m,'-',STR_PAD_RIGHT);	$n = str_replace("-","　　　　　",$n);	for($i=0;$i<count($class_arr);$i++){			if($class_arr[$i][2]==$id){			if($class_arr[$i][0]==$index){				echo "        <tr  onmouseover=\"this.bgColor='#D3EDFC'\" onmouseout=\"this.bgColor='#eff7fd'\"> <td align=\"center\">".$class_arr[$i][0]."</td> <td>".$n."|--";				if ($class_arr[$i][5]==99){					echo $class_arr[$i][1];		}else if ($class_arr[$i][5]==1){					echo $class_arr[$i][1];		}else if($class_arr[$i][5]==6){			echo "<a href=\"Admin_Book.php\"><strong>".$class_arr[$i][1]."</strong></a>"; 			}else{			echo "<a href=\"Admin_Content.php?Action=columns&columnsname=".$class_arr[$i][0]."\"><strong>".$class_arr[$i][1]."</strong></a>";  		}				hide($class_arr[$i][4]);				echo "</td><td align=\"center\"><font color='orange'>";		        modulecolumns($class_arr[$i][5]);		         echo "</font></td><td align=\"center\">";		echo "<a href=\"";		moduleurl($class_arr[$i][5]);		echo "".$class_arr[$i][0]."\">添加内容</a>        <a href='Admin_Columns_Set.php?Action=adds&bid=".$class_arr[$i][0]."'>添加子栏目</a>  <a href='Admin_Columns_Set.php?Action=edits&id=".$class_arr[$i][0]."&bid=".$class_arr[$i][2]."'> 编辑栏目</a>  <a href='Admin_Columns_Set.php?Action=del&id=".$class_arr[$i][0]."' onClick=\"delcfm()\"> 删除栏目</a>"; 		echo "</td></tr>\n";			}else{				echo "        <tr  onmouseover=\"this.bgColor='#D3EDFC'\" onmouseout=\"this.bgColor='#eff7fd'\"> <td align=\"center\">".$class_arr[$i][0]."</td> <td>".$n."|--";				if ($class_arr[$i][5]==99){					echo $class_arr[$i][1];		}else if ($class_arr[$i][5]==1){					echo $class_arr[$i][1];		}else if($class_arr[$i][5]==6){			echo "<a href=\"Admin_Book.php\"><strong>".$class_arr[$i][1]."</strong></a>"; 			}else{			echo "<a href=\"Admin_Content.php?Action=columns&columnsname=".$class_arr[$i][0]."\"><strong>".$class_arr[$i][1]."</strong></a>";  		}				hide($class_arr[$i][4]);				echo "</td><td align=\"center\"><font color='orange'>";		        modulecolumns($class_arr[$i][5]);		         echo "</font></td><td align=\"center\">";		if ($class_arr[$i][5]==6){			echo "　　　　";			}		else{		echo "<a href=\"";		moduleurl($class_arr[$i][5]);		echo "".$class_arr[$i][0]."\">添加内容</a>  ";		}		echo "<a href='Admin_Columns_Set.php?Action=adds&bid=".$class_arr[$i][0]."'>添加子栏目</a>  <a href='Admin_Columns_Set.php?Action=edits&id=".$class_arr[$i][0]."&bid=".$class_arr[$i][2]."'> 编辑栏目</a>  <a href='Admin_Columns_Set.php?Action=del&id=".$class_arr[$i][0]."' onClick=\"delcfm()\"> 删除栏目</a>"; 		echo "</td></tr>\n";			}			lmfl($m+1,$class_arr[$i][0],$index);		}	}}echo"<body>";echo"<table width=\"98%\" border=\"1\" align=\"center\" cellpadding=\"5\" cellspacing=\"0\" class=\"table\"><tr><td><a href=\"Admin_Columns_Set.php?Action=adds&bid=0\">添加顶级栏目</a><br/><br/><font color=red>注：</font>栏目名称若为粗体，则可点击查看栏目下的内容列表</td></tr></table><br/><table width=\"98%\" border=\"1\" align=\"center\" cellpadding=\"5\" cellspacing=\"0\" class=\"table\"><tr><td align=\"center\"><strong>ID</strong></td><td align=\"center\" width=\"60%\"><strong>栏目名称</strong></td><td align=\"center\"><strong>所属模块</strong></td><td align=\"center\"><strong>操作</strong></td></tr>";lmfl(0,0,0);echo"</table>";echo"</body> ";echo"</html>";?>